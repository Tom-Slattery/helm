name: Trigger Helm workflow in automation repository

on:
  push:
    branches: [main]

jobs:
    trigger-workflow:
        name: trigger helm workflow
        runs-on: ubuntu-latest

        steps:
        - name: Triggering workflow
          uses: convictional/trigger-workflow-and-wait@v1.6.1
          with:
            owner: jaydee029
            repo: automation
            github_token: ${{ github.token }}
            ref: main
            wait_interval: 10
            workflow_file_name: build-helm.yaml
            propagate_failure: true
            trigger_workflow: true
            wait_workflow: true

